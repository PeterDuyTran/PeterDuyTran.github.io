{{ with .Site.GetPage "/projects" }}
<div class="section" id="{{ .Title | urlize }}">
    <div class="container">
        <h2 class="title is-2 has-text-centered">
            {{ .Title | markdownify }}
        </h2>
        <div class="section">
            <div class="project-showcase">
                <div class="project-list">
                    {{ $totalProjects := (len .Pages) }}
                    {{ $numberOfProjectsToShow := .Site.Params.home.numberOfProjectsToShow | default $totalProjects }}
                    {{ range $index, $element := .Pages.ByWeight | first $numberOfProjectsToShow }}
                    <div class="project-item{{ if eq $index 0 }} is-active{{ end }}" data-project="{{ $index }}">
                        <span class="project-name">{{ .Title | markdownify }}</span>
                        {{ if .Params.project_timeframe }}
                        <span class="project-timeframe">{{ .Params.project_timeframe }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                </div>
                <div class="project-connector">
                    <div class="connector-track"></div>
                    <div class="connector-indicator"></div>
                </div>
                <div class="project-preview">
                    {{ $totalProjects := (len .Pages) }}
                    {{ $numberOfProjectsToShow := .Site.Params.home.numberOfProjectsToShow | default $totalProjects }}
                    {{ range $index, $element := .Pages.ByWeight | first $numberOfProjectsToShow }}
                    <div class="project-content{{ if eq $index 0 }} is-active{{ end }}" data-project-content="{{ $index }}">
                        <div class="project-description">
                            <p>{{ .Description }}</p>
                        </div>
                        <div class="project-media">
                            {{ with .Resources.ByType "image" }}
                            {{ range first 1 (sort . "Params.weight") }}
                            {{ $fallback := .Resize "900x" }}
                            {{ $webp := .Resize "900x webp" }}
                            <picture>
                                <source srcset="{{ $webp.Permalink }}" type="image/webp">
                                <img src="{{ $fallback.Permalink }}" alt="{{ $fallback.Name }}" width="{{ $fallback.Width }}" height="{{ $fallback.Height }}" loading="lazy">
                            </picture>
                            {{ end }}
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}
                </div>
            </div>
        </div>
        {{ if lt $numberOfProjectsToShow $totalProjects }}
        <div class="container has-text-centered top-pad">
            <a href="{{ .Permalink }}">{{ i18n "index_projects_allProjects" . }}</a>
        </div>
        {{ end }}
    </div>
    </div>

{{ end }}
