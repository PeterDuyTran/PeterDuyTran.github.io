<!DOCTYPE html>
<html lang="en">

    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1317&amp;path=livereload" data-no-instant defer></script><title>Huli: Nine Tails of Vengeance — Technical Deep Dive &ndash; Duy Tran — Lead Gameplay Engineer</title>
<meta name="description" content="Lead Gameplay Engineer — combat systems, AI frameworks, and plugin architecture on UE5.">

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8"/>



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.4/css/academicons.min.css" integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />


<link rel="stylesheet" href="http://localhost:1317/css/palettes/base16-dark.css">
<link rel="stylesheet" href="http://localhost:1317/css/risotto.css">
<link rel="stylesheet" href="http://localhost:1317/css/custom.css">












<meta property="og:title" content="Huli: Nine Tails of Vengeance — Technical Deep Dive &ndash; Duy Tran — Lead Gameplay Engineer" />
<meta property="og:url" content="http://localhost:1317/posts/huli-technical-showcase/" />

  <meta property="og:description" content="A comprehensive technical breakdown of the combat, AI, and plugin architecture powering Huli: Nine Tails of Vengeance on Unreal Engine 5.7. &ndash; "/> 

<meta property="og:locale" content="en-us" />
<meta property="og:image" content="http://localhost:1317/images/author/avatar.png" /></head>

    <body>
        <div class="page">

            <header class="page__header"><nav class="page__nav main-nav">
    <ul>
      <li class="nomarker"><h1 class="page__logo"><a href="http://localhost:1317/" class="page__logo-inner">Duy Tran — Lead Gameplay Engineer</a></h1></li>
    
    
    <li class="main-nav__item"><a class="nav-main-item" href="http://localhost:1317/posts/" title="">Posts</a></li>
    
    <li class="main-nav__item"><a class="nav-main-item" href="http://localhost:1317/projects/" title="">Projects</a></li>
    
    <li class="main-nav__item"><a class="nav-main-item" href="http://localhost:1317/about/" title="">About</a></li>
    
    </ul>
</nav>

</header>

            <section class="page__body">
    <header class="content__header">
        <h1>Huli: Nine Tails of Vengeance — Technical Deep Dive</h1>
    </header>
    <div class="content__body">
        <div style="background:#1a1a2e; color:#e0e0e0; padding:1.5em 2em; border-radius:8px; margin-bottom:2em;">
<p><strong>Role:</strong> Lead Gameplay Engineer  |  <strong>Engine:</strong> Unreal Engine 5.7  |  <strong>Platforms:</strong> PC, PS5, Xbox Series X</p>
<p><strong>Huli: Nine Tails of Vengeance</strong> is a combat-driven Action RPG featuring deep melee combat, AI-coordinated enemy encounters, and a modular plugin architecture built for scalability. This page walks through the core technical systems I designed and implemented.</p>
</div>
<hr>
<h2 id="architecture-overview">Architecture Overview</h2>
<p>The project is built on a <strong>three-tier modular plugin architecture</strong> that enforces clean dependency boundaries and supports independent iteration across teams.</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────────┐
│                    TIER 3 — GameFeature Plugins                 │
│   (Content-specific logic, can depend on all tiers)             │
│                                                                 │
│   Game modes, level-specific encounters, quest logic            │
└──────────────────────────────┬──────────────────────────────────┘
                               │ depends on
┌──────────────────────────────▼──────────────────────────────────┐
│                    TIER 2 — MainGame Module                     │
│   (Core gameplay: characters, controllers, inventory)           │
│                                                                 │
│   Source/S2/ — Foundation, Character, Combat, AI, Items, UI     │
└──────────────────────────────┬──────────────────────────────────┘
                               │ depends on
┌──────────────────────────────▼──────────────────────────────────┐
│                    TIER 1 — Generic Plugins                     │
│   (Reusable systems, zero game-specific dependencies)           │
│                                                                 │
│   GAS, Hitbox, ComboGraph, AI Framework, Team, Audio, Save      │
└─────────────────────────────────────────────────────────────────┘
</code></pre><p><strong>Key constraint:</strong> Generic plugins (Tier 1) <strong>cannot</strong> depend on MainGame or GameFeature modules. This forces clean API boundaries and makes plugins portable across projects.</p>
<h3 id="plugin-catalog-19-custom-plugins">Plugin Catalog (19+ Custom Plugins)</h3>
<table>
  <thead>
      <tr>
          <th>Domain</th>
          <th>Plugin</th>
          <th>Purpose</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Combat</strong></td>
          <td>SipherComboGraph</td>
          <td>Visual node-based combo editor with undo/redo and runtime ability integration</td>
      </tr>
      <tr>
          <td><strong>Combat</strong></td>
          <td>SipherHitbox</td>
          <td>Animation notify-driven hit detection with predicted traces for low-FPS robustness</td>
      </tr>
      <tr>
          <td><strong>Combat</strong></td>
          <td>SipherAttributes</td>
          <td>GAS attribute set foundation (7 specialized sets)</td>
      </tr>
      <tr>
          <td><strong>AI</strong></td>
          <td>SipherAIScalableFramework</td>
          <td>Hybrid State Tree + BT framework with coordinator system</td>
      </tr>
      <tr>
          <td><strong>AI</strong></td>
          <td>SipherAIBPTools</td>
          <td>Blueprint authoring tools for AI designers</td>
      </tr>
      <tr>
          <td><strong>Audio</strong></td>
          <td>SipherAudio</td>
          <td>Runtime audio framework with editor test harness</td>
      </tr>
      <tr>
          <td><strong>Narrative</strong></td>
          <td>SipherSubtitle</td>
          <td>Customizable subtitle rendering system</td>
      </tr>
      <tr>
          <td><strong>Cinematic</strong></td>
          <td>SipherCutsceneCore / Manager / Tools</td>
          <td>Three-module cinematic pipeline</td>
      </tr>
      <tr>
          <td><strong>Persistence</strong></td>
          <td>SipherSaveLoadManager</td>
          <td>Save/load with checkpoint integration</td>
      </tr>
      <tr>
          <td><strong>Gameplay</strong></td>
          <td>SipherTimeDilationManager</td>
          <td>Frame-accurate time manipulation for slow-mo and hit stops</td>
      </tr>
      <tr>
          <td><strong>Team</strong></td>
          <td>SipherTeam</td>
          <td>Faction affiliation and relationship queries</td>
      </tr>
      <tr>
          <td><strong>Framework</strong></td>
          <td>SipherCore</td>
          <td>Shared types, utilities, and base classes</td>
      </tr>
      <tr>
          <td><strong>Framework</strong></td>
          <td>SipherInteractionObjectFramework</td>
          <td>Smart Object-based interaction system</td>
      </tr>
      <tr>
          <td><strong>Framework</strong></td>
          <td>SipherFABRIK</td>
          <td>Full-body IK solution</td>
      </tr>
      <tr>
          <td><strong>Framework</strong></td>
          <td>SipherInputReplay</td>
          <td>Input recording and deterministic playback</td>
      </tr>
      <tr>
          <td><strong>Framework</strong></td>
          <td>SipherMontageStandards</td>
          <td>Animation montage naming and section conventions</td>
      </tr>
      <tr>
          <td><strong>Tools</strong></td>
          <td>SipherEnemyTools</td>
          <td>Content validation for enemy assets</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="combat-systems">Combat Systems</h2>
<p>The combat pipeline is the project&rsquo;s centerpiece — a deeply integrated stack of GAS, hitbox detection, combo graphs, and a universal damage pipeline that delivers frame-precise, direction-aware melee combat.</p>
<h3 id="gameplay-ability-system-gas-integration">Gameplay Ability System (GAS) Integration</h3>
<p>We extend Unreal&rsquo;s GAS with a custom <strong>Ability System Component</strong> that supports runtime data passing through an <strong>Ability Data Queue</strong> pattern. This allows abilities to receive context-specific parameters without subclassing per-variant:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Runtime data passed alongside ability activation
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">FSipherAbilitySpecQueueItem</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    FGameplayAbilitySpecHandle SpecHandle;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Generic data container — abilities introspect this at activation
</span></span></span><span style="display:flex;"><span>    TInstancedStruct<span style="color:#f92672">&lt;</span>FSipherGenericAbilityData<span style="color:#f92672">&gt;</span> GenericAbilityData;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Activation with data:
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> USipherAbilitySystemComponent<span style="color:#f92672">::</span>TryActivateAbilityWithData(
</span></span><span style="display:flex;"><span>    FGameplayAbilitySpecHandle Handle,
</span></span><span style="display:flex;"><span>    TInstancedStruct<span style="color:#f92672">&lt;</span>FSipherGenericAbilityData<span style="color:#f92672">&gt;&amp;&amp;</span> Data)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    AbilityDataQueue.Enqueue({ Handle, MoveTemp(Data) });
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">TryActivateAbility</span>(Handle);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Why this matters:</strong> Traditional GAS requires creating ability subclasses for each parameter variation (e.g., light attack vs. heavy attack vs. aerial attack). The data queue pattern lets a single ability class handle all variants by reading runtime context from the queue during activation — dramatically reducing class proliferation.</p>
<h4 id="attribute-architecture-7-specialized-sets">Attribute Architecture (7 Specialized Sets)</h4>
<table>
  <thead>
      <tr>
          <th>Attribute Set</th>
          <th>Domain</th>
          <th>Key Attributes</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Offensive</td>
          <td>Attack</td>
          <td>AttackPower, CriticalChance, CriticalMultiplier, FinisherDamage</td>
      </tr>
      <tr>
          <td>Defensive</td>
          <td>Defense</td>
          <td>DefenseRating, DamageNegation, Vulnerability</td>
      </tr>
      <tr>
          <td>PlayerCombat</td>
          <td>Resources</td>
          <td>Stamina, FocusPoints, MagicPool</td>
      </tr>
      <tr>
          <td>ElementalResistance</td>
          <td>Elements</td>
          <td>Fire, Ice, Thunder, Earth, Poison resistance</td>
      </tr>
      <tr>
          <td>CharacterMovement</td>
          <td>Mobility</td>
          <td>MoveSpeed, DodgeDistance, AgilityStat</td>
      </tr>
      <tr>
          <td>Consumable</td>
          <td>Items</td>
          <td>Consumable charges and cooldowns</td>
      </tr>
      <tr>
          <td>Shield</td>
          <td>Guard</td>
          <td>ShieldHealth, BlockReduction</td>
      </tr>
  </tbody>
</table>
<h3 id="universal-damage-pipeline">Universal Damage Pipeline</h3>
<p>All damage flows through a <strong>7-stage execution pipeline</strong> — modular passes that can be independently modified, debugged, and extended:</p>
<pre tabindex="0"><code>  Attacker activates ability
         │
         ▼
  ┌─────────────────────┐
  │ 1. SourceOutputDamage│  Attacker&#39;s base damage + crit calculation
  └──────────┬──────────┘
             ▼
  ┌─────────────────────┐
  │ 2. TargetDefense    │  Defender&#39;s armor negation + vulnerability
  └──────────┬──────────┘
             ▼
  ┌─────────────────────┐
  │ 3. Immunity         │  Resistance and full immunity checks
  └──────────┬──────────┘
             ▼
  ┌─────────────────────┐
  │ 4. Elemental        │  Elemental damage type processing
  └──────────┬──────────┘
             ▼
  ┌─────────────────────┐
  │ 5. ShieldConsumption│  Shield break mechanics and overflow
  └──────────┬──────────┘
             ▼
  ┌─────────────────────┐
  │ 6. SetAbsoluteDamage│  Override hooks for special scenarios
  └──────────┬──────────┘
             ▼
  ┌─────────────────────┐
  │ 7. FinalApplication │  Apply to Health attribute + broadcast
  └─────────────────────┘
</code></pre><p>Each stage is a separate <strong>Gameplay Effect Execution Calculation</strong> — a design that makes it trivial to add new damage modifiers (e.g., &ldquo;elemental weakness bonus&rdquo;) without touching existing pipeline stages.</p>
<h3 id="direction-aware-parry-system">Direction-Aware Parry System</h3>
<p>The parry system uses a <strong>state machine</strong> with directional attack classification — incoming attacks are analyzed by vector math to determine their offensive direction, enabling direction-specific block and parry animations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Parry state machine
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EParryState</span> <span style="color:#f92672">:</span> uint8
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    None,           <span style="color:#75715e">// No parry active
</span></span></span><span style="display:flex;"><span>    Anticipation,   <span style="color:#75715e">// Wind-up frames (can cancel)
</span></span></span><span style="display:flex;"><span>    Parrying,       <span style="color:#75715e">// Active parry window (perfect timing)
</span></span></span><span style="display:flex;"><span>    Blocking,       <span style="color:#75715e">// Extended block window (reduced damage)
</span></span></span><span style="display:flex;"><span>    Recovery,       <span style="color:#75715e">// End-lag (vulnerable)
</span></span></span><span style="display:flex;"><span>    Success         <span style="color:#75715e">// Parry landed → counter-attack window
</span></span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Attack direction classification for parry response
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EDamageOffensiveDirection</span> <span style="color:#f92672">:</span> uint8
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Vertical,       <span style="color:#75715e">// Overhead strikes
</span></span></span><span style="display:flex;"><span>    Horizontal,     <span style="color:#75715e">// Sweeping attacks
</span></span></span><span style="display:flex;"><span>    DiagonalLeft,   <span style="color:#75715e">// Upper-left to lower-right
</span></span></span><span style="display:flex;"><span>    DiagonalRight,  <span style="color:#75715e">// Upper-right to lower-left
</span></span></span><span style="display:flex;"><span>    Center          <span style="color:#75715e">// Stab / thrust
</span></span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>The parry system feeds directly into the <strong>riposte chain</strong> — a successful parry opens a window for a direction-matched counter-attack sequence, creating risk/reward depth comparable to Sekiro-style deflection.</p>
<h3 id="visual-combo-graph-editor">Visual Combo Graph Editor</h3>
<p>Combat designers author attack chains in a <strong>node-based visual editor</strong> with full undo/redo support. The graph compiles to runtime state machines that integrate with GAS:</p>
<p><strong>Node Types:</strong></p>
<ul>
<li><strong>Input Nodes</strong> — Listen for player input during combo windows</li>
<li><strong>Condition Nodes</strong> — Gate transitions on stamina, cooldowns, or tags</li>
<li><strong>Execution Nodes</strong> — Trigger montages and gameplay effects</li>
<li><strong>Ability Nodes</strong> — Activate GAS abilities via the data queue pattern</li>
</ul>
<p><strong>Action Pass Types:</strong></p>
<ul>
<li><code>ActivateAbility</code> — GAS ability activation with runtime data</li>
<li><code>PlayMontage</code> — Animation playback with section targeting</li>
<li><code>PhysicalAttack</code> / <code>SpellAttack</code> — Melee or ranged damage dispatch</li>
<li><code>CostStat</code> — Stamina/resource deduction</li>
</ul>
<h3 id="hitbox-system">Hitbox System</h3>
<p>Hitboxes are driven entirely by <strong>Animation Notify States</strong> — animators place notify windows on montages, and the runtime traces weapon socket positions between frames:</p>
<p><strong>Key features:</strong></p>
<ul>
<li><strong>Predicted traces</strong> for 25-40 FPS robustness (interpolates missed positions)</li>
<li><strong>Per-hit deduplication</strong> via target cache to prevent double-damage</li>
<li><strong>Hit stop</strong> with configurable stacking (multiple hits don&rsquo;t compound pause duration beyond a cap)</li>
<li><strong>Debug visualization</strong> via console variables for rapid iteration</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Hit stop configuration — shipped values after extensive playtesting
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">FHitStopConfig</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> Duration <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.1f</span>;          <span style="color:#75715e">// Base pause duration
</span></span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> MinPlayRate <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.03f</span>;      <span style="color:#75715e">// Near-zero but not frozen
</span></span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">bool</span>  bCosmetic <span style="color:#f92672">=</span> true;         <span style="color:#75715e">// Affects animation only, not gameplay
</span></span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> StackDecay <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5f</span>;        <span style="color:#75715e">// Each stacked hit adds 50% less
</span></span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><hr>
<h2 id="ai-framework">AI Framework</h2>
<p>The AI system is a <strong>hybrid architecture</strong> combining Unreal&rsquo;s State Trees for high-level decision-making with Behavior Trees for tactical execution, coordinated through a centralized <strong>Coordinator</strong> that manages group behavior, formations, and resource budgeting.</p>
<h3 id="architecture">Architecture</h3>
<pre tabindex="0"><code>┌─────────────────────────────────────────────┐
│         AI Coordinator (Global)              │
│  Budget management, threat prioritization    │
│  Formation assignment, group commands        │
└──────────┬──────────────┬───────────────────┘
           │              │
    ┌──────▼──────┐ ┌────▼────────────┐
    │ State Tree  │ │  State Tree     │
    │ (Macro AI)  │ │  (Macro AI)     │   ... per AI entity
    │ Patrol →    │ │  Guard →        │
    │ Alert →     │ │  Investigate →  │
    │ Combat      │ │  Combat         │
    └──────┬──────┘ └────┬────────────┘
           │              │
    ┌──────▼──────┐ ┌────▼────────────┐
    │ Behavior    │ │  Behavior       │
    │ Tree        │ │  Tree           │   ... tactical execution
    │ (Tactics)   │ │  (Tactics)      │
    └─────────────┘ └─────────────────┘
</code></pre><h3 id="coordinator-system">Coordinator System</h3>
<p>The Coordinator prevents the classic &ldquo;one-at-a-time&rdquo; problem in action games where enemies politely wait their turn. Instead:</p>
<ul>
<li><strong>Attack budgets</strong> limit simultaneous attackers (e.g., max 3 of 8 enemies can swing at once)</li>
<li><strong>Formation slots</strong> position enemies in rings/arcs with priority-based assignment</li>
<li><strong>Group commands</strong> synchronize behavior (coordinated retreats, flanking maneuvers, staggered attacks)</li>
<li><strong>Threat alerting</strong> propagates player detection across nearby groups</li>
</ul>
<h3 id="scalable-difficulty-parameters">Scalable Difficulty Parameters</h3>
<p>Each AI entity has a <code>SipherAIScalableParametersComponent</code> that multiplies core attributes:</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Effect</th>
          <th>Range</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>DamageMultiplier</td>
          <td>Outgoing damage scaling</td>
          <td>0.5x – 2.0x</td>
      </tr>
      <tr>
          <td>HealthMultiplier</td>
          <td>Health pool scaling</td>
          <td>0.5x – 3.0x</td>
      </tr>
      <tr>
          <td>ReactionTimeMultiplier</td>
          <td>Decision delay</td>
          <td>0.5x – 2.0x</td>
      </tr>
      <tr>
          <td>AggressionLevel</td>
          <td>Attack frequency</td>
          <td>Low / Medium / High</td>
      </tr>
  </tbody>
</table>
<p>These are tuned per-difficulty and per-encounter, allowing designers to create dynamic difficulty curves without touching behavior logic.</p>
<h3 id="performance-50-ai-at-60-fps">Performance: 50+ AI at 60 FPS</h3>
<p>Achieving 50+ concurrent AI entities at locked 60 FPS required three key optimizations:</p>
<ol>
<li><strong>AI LOD System</strong> — Entities beyond camera range or at distance run simplified behavior (fewer perception queries, reduced decision frequency)</li>
<li><strong>Time Slicing</strong> — Group coordination decisions are batched across frames rather than evaluated every tick</li>
<li><strong>Smart Object Pooling</strong> — Interaction points are pre-allocated and recycled instead of spawned dynamically</li>
</ol>
<hr>
<h2 id="character-system">Character System</h2>
<h3 id="hierarchy">Hierarchy</h3>
<pre tabindex="0"><code>ASipherBasicCharacter
├── Implements 9 interfaces:
│   ├── IAbilitySystemInterface
│   ├── IGameplayTagAssetInterface
│   ├── ILifeStateInterface
│   ├── ICharacterCombatInterface
│   ├── ISipherDomainSystemInterface
│   ├── ICompanionControlInterface
│   ├── ISipherSaveableInterface
│   ├── ISipherCutsceneActorInterface
│   └── IComboCharacterInterface
│
├── ASipherPlayerCharacter
│   └── 60+ gameplay features (movement, combat, abilities, UI)
│
└── ASipherAICharacter
    ├── ASipherAINonPlayerCharacter (friendly NPCs)
    └── ASipherMobCharacterBase (enemies)
</code></pre><h3 id="component-architecture">Component Architecture</h3>
<p>Characters are composed of specialized components rather than monolithic classes:</p>
<table>
  <thead>
      <tr>
          <th>Component</th>
          <th>Responsibility</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>SipherCharacterMovementComponent</code></td>
          <td>Enhanced movement with animation-aware turning</td>
      </tr>
      <tr>
          <td><code>SipherCharacterLifeStateComponent</code></td>
          <td>Death handling, respawn triggers, invincibility frames</td>
      </tr>
      <tr>
          <td><code>SipherCharacterStatComponent</code></td>
          <td>Runtime attribute tracking and UI binding</td>
      </tr>
      <tr>
          <td><code>SipherHitReaction</code></td>
          <td>Damage impact reactions (light/heavy/knockdown/stagger)</td>
      </tr>
      <tr>
          <td><code>SipherComboManagerComponent</code></td>
          <td>Combo graph execution and state tracking</td>
      </tr>
      <tr>
          <td><code>SipherCombatExecutionComponent</code></td>
          <td>Attack mechanics and damage dispatch</td>
      </tr>
      <tr>
          <td><code>SipherDismembermentComponent</code></td>
          <td>Gore/dismemberment on killing blows</td>
      </tr>
      <tr>
          <td><code>SipherShieldComponentBase</code></td>
          <td>Guard meter and block reduction</td>
      </tr>
      <tr>
          <td><code>SipherDamageFeedbackComponent</code></td>
          <td>VFX/SFX resolution for hit effects</td>
      </tr>
  </tbody>
</table>
<p><strong>Design rationale:</strong> This composition-over-inheritance approach means each system can be developed, tested, and iterated independently. Adding dismemberment to a new enemy type is as simple as attaching the component — no subclassing required.</p>
<hr>
<h2 id="animation-integration">Animation Integration</h2>
<p>Combat feel is driven by <strong>100+ Animation Notify States</strong> that synchronize gameplay mechanics to exact animation frames:</p>
<h3 id="notify-categories">Notify Categories</h3>
<table>
  <thead>
      <tr>
          <th>Category</th>
          <th>Examples</th>
          <th>Purpose</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Hitbox</strong></td>
          <td><code>ANS_SocketTracker</code></td>
          <td>Record weapon socket positions for trace-based hit detection</td>
      </tr>
      <tr>
          <td><strong>Parry</strong></td>
          <td><code>ANS_ParryWarp</code>, <code>ANS_ParryEnduranceWarp</code></td>
          <td>Root motion warping during parry animations</td>
      </tr>
      <tr>
          <td><strong>Combo</strong></td>
          <td><code>ANS_PerfectComboWindow</code>, <code>ANS_CounterWindow</code></td>
          <td>Frame-precise input windows for combo transitions</td>
      </tr>
      <tr>
          <td><strong>Riposte</strong></td>
          <td><code>ANS_RiposteChain</code></td>
          <td>Counter-attack warp after successful parry</td>
      </tr>
      <tr>
          <td><strong>Cinematic</strong></td>
          <td><code>AN_StartCinematicQTE</code></td>
          <td>QTE trigger points during finisher sequences</td>
      </tr>
      <tr>
          <td><strong>Stance</strong></td>
          <td><code>ANS_StanceWarp</code></td>
          <td>Smooth stance transitions with motion warping</td>
      </tr>
  </tbody>
</table>
<p>This animation-centric approach means <strong>combat designers control timing</strong>, not programmers. A parry window&rsquo;s duration is set by the length of the notify state on the montage — designers adjust feel in the animation editor, not in code.</p>
<hr>
<h2 id="performance-engineering">Performance Engineering</h2>
<h3 id="async-asset-loading">Async Asset Loading</h3>
<p>All soft object references (montages, textures, VFX) are loaded asynchronously to prevent game-thread hitches:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// BeginPlay — start async load
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> UMyComponent<span style="color:#f92672">::</span>BeginPlay()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Super<span style="color:#f92672">::</span>BeginPlay();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    FStreamableManager<span style="color:#f92672">&amp;</span> Mgr <span style="color:#f92672">=</span> UAssetManager<span style="color:#f92672">::</span>Get().GetStreamableManager();
</span></span><span style="display:flex;"><span>    StreamHandle <span style="color:#f92672">=</span> Mgr.RequestAsyncLoad(
</span></span><span style="display:flex;"><span>        MontageRef.ToSoftObjectPath(),
</span></span><span style="display:flex;"><span>        FStreamableDelegate<span style="color:#f92672">::</span>CreateUObject(<span style="color:#66d9ef">this</span>, <span style="color:#f92672">&amp;</span>ThisClass<span style="color:#f92672">::</span>OnMontageLoaded)
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// EndPlay — release handle to prevent leaks
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> UMyComponent<span style="color:#f92672">::</span>EndPlay(<span style="color:#66d9ef">const</span> EEndPlayReason<span style="color:#f92672">::</span>Type Reason)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (StreamHandle.IsValid())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        StreamHandle<span style="color:#f92672">-&gt;</span>ReleaseHandle();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    Super<span style="color:#f92672">::</span>EndPlay(Reason);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Usage — safe access (nullptr if not yet loaded)
</span></span></span><span style="display:flex;"><span>UAnimMontage<span style="color:#f92672">*</span> Montage <span style="color:#f92672">=</span> MontageRef.Get();
</span></span></code></pre></div><p><strong>Rule enforced project-wide:</strong> <code>LoadSynchronous()</code> is banned. Every asset load goes through <code>RequestAsyncLoad()</code> with proper handle cleanup.</p>
<h3 id="delegate-pattern">Delegate Pattern</h3>
<p>Components expose events through a <strong>private delegate + public getter</strong> pattern to prevent accidental reassignment:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Private delegate — cannot be directly assigned from outside
</span></span></span><span style="display:flex;"><span>DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnDamageReceived, <span style="color:#66d9ef">float</span>, Amount);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>UCLASS()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">USipherHealthComponent</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> UActorComponent
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    GENERATED_BODY()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Public getter returns reference — callers can bind, but not replace
</span></span></span><span style="display:flex;"><span>    FOnDamageReceived<span style="color:#f92672">&amp;</span> GetOnDamageReceived() { <span style="color:#66d9ef">return</span> OnDamageReceived; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    FOnDamageReceived OnDamageReceived;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="gameplay-tags--compile-time-safety">Gameplay Tags — Compile-Time Safety</h3>
<p>All gameplay tags are declared natively for compile-time validation. <code>RequestGameplayTag()</code> is banned project-wide:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Header — compile-time tag declaration
</span></span></span><span style="display:flex;"><span>UE_DECLARE_GAMEPLAY_TAG_EXTERN(TAG_Combat_State_Parrying);
</span></span><span style="display:flex;"><span>UE_DECLARE_GAMEPLAY_TAG_EXTERN(TAG_Combat_Damage_Physical);
</span></span><span style="display:flex;"><span>UE_DECLARE_GAMEPLAY_TAG_EXTERN(TAG_Combat_Immunity_Stagger);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Source — tag definition
</span></span></span><span style="display:flex;"><span>UE_DEFINE_GAMEPLAY_TAG(TAG_Combat_State_Parrying,   <span style="color:#e6db74">&#34;Combat.State.Parrying&#34;</span>);
</span></span><span style="display:flex;"><span>UE_DEFINE_GAMEPLAY_TAG(TAG_Combat_Damage_Physical,  <span style="color:#e6db74">&#34;Combat.Damage.Physical&#34;</span>);
</span></span><span style="display:flex;"><span>UE_DEFINE_GAMEPLAY_TAG(TAG_Combat_Immunity_Stagger, <span style="color:#e6db74">&#34;Combat.Immunity.Stagger&#34;</span>);
</span></span></code></pre></div><p>Over <strong>100 native tags</strong> organized by domain — combat, damage types, elements, force effects, AI states, and ability lifecycle.</p>
<hr>
<h2 id="key-technical-achievements">Key Technical Achievements</h2>
<div style="display:grid; grid-template-columns: 1fr 1fr; gap: 1em; margin: 1.5em 0;">
<div style="background:#0d1117; padding:1em 1.5em; border-radius:6px; border-left:4px solid #58a6ff;">
<p><strong>19+ Custom Plugins</strong>
Modular architecture with enforced three-tier dependency boundaries. Each plugin is independently buildable and testable.</p>
</div>
<div style="background:#0d1117; padding:1em 1.5em; border-radius:6px; border-left:4px solid #f78166;">
<p><strong>7-Stage Damage Pipeline</strong>
Execution-based damage processing with injectable stages for immunity, elemental, shield, and custom passes.</p>
</div>
<div style="background:#0d1117; padding:1em 1.5em; border-radius:6px; border-left:4px solid #3fb950;">
<p><strong>50+ AI at 60 FPS</strong>
Hybrid State Tree + BT with coordinator-managed formations, attack budgets, and LOD-based complexity scaling.</p>
</div>
<div style="background:#0d1117; padding:1em 1.5em; border-radius:6px; border-left:4px solid #d2a8ff;">
<p><strong>100+ Animation Notifies</strong>
Frame-precise combat mechanics authored by designers in the animation editor, not in code.</p>
<hr>
<h2 id="technologies--tools">Technologies &amp; Tools</h2>
<table>
  <thead>
      <tr>
          <th>Category</th>
          <th>Technologies</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Engine</strong></td>
          <td>Unreal Engine 5.7 (custom modifications)</td>
      </tr>
      <tr>
          <td><strong>Languages</strong></td>
          <td>C++ (primary), Blueprints (designer-facing systems)</td>
      </tr>
      <tr>
          <td><strong>Core Systems</strong></td>
          <td>Gameplay Ability System, State Trees, Behavior Trees, Smart Objects</td>
      </tr>
      <tr>
          <td><strong>Rendering</strong></td>
          <td>DLSS, Streamline, NIS (NVIDIA integrations)</td>
      </tr>
      <tr>
          <td><strong>Animation</strong></td>
          <td>Motion Warping, FABRIK IK, Kawaii Physics</td>
      </tr>
      <tr>
          <td><strong>Version Control</strong></td>
          <td>Perforce</td>
      </tr>
      <tr>
          <td><strong>Platforms</strong></td>
          <td>PC (Win64), PlayStation 5, Xbox Series X</td>
      </tr>
  </tbody>
</table>
<hr>
<div style="text-align:center; padding:2em 0; color:#888; font-size:0.9em;">
<p><em>This showcase covers architectural decisions and system design patterns. Specific implementation details are under NDA.</em></p>
<p><em>Built with Unreal Engine 5.7 — C++ throughout.</em></p>
</div>

    </div>
    <footer class="content__footer"></footer>

            </section>

            <section class="page__aside">
                <div class="aside__about">
<div class="aside__about">
    
    <img class="about__logo" src="http://localhost:1317/images/author/avatar.png" alt="Logo">
<h1 class="about__title">Duy Tran</h1>
<p class="about__description">Lead Gameplay Engineer — combat systems, AI frameworks, and plugin architecture on UE5.</p>
</div>


<ul class="aside__social-links">
    
    <li>
        <a href="https://github.com/tnqduy" rel="me" aria-label="GitHub" title="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>&nbsp;
    </li>
    
</ul>
</div>
                <hr>
                <div class="aside__content">
    <p>A comprehensive technical breakdown of the combat, AI, and plugin architecture powering Huli: Nine Tails of Vengeance on Unreal Engine 5.7.</p>
    
        <p>
            
            2026-01-15
        </p>
    

    

                </div>
            </section>

            <footer class="page__footer"><p>
    
    
    
    
    
    
      
    
      
    
      
    
    
    
      
      
          
            
            
                <br/><span class="active">$ echo $LANG<br/><b></b></span><br/>

            
          
      
    
</p>
<br /><br />
<p class="copyright"></p>
<p class="advertisement">Powered by <a href="https://gohugo.io/">hugo</a> and <a href="https://github.com/joeroe/risotto">risotto</a>.</p>
</footer>

        </div>
    </body>

</html>
